# Note: we deliberately avoid using a Hydra _target_ here and let
# train.py.instantiate_datamodule() construct HandEncoderDataModule
# with this config as data_cfg. This sidesteps occasional target
# resolution/import issues while keeping all parameters here.
# _target_: datamodules.HandEncoderDataModule.HandEncoderDataModule
name: handencoder_dm_dex_debug
mode: dexgraspnet

# HandEncoderDataModule constructor args
batch_size: ${batch_size}
num_workers: 8
pin_memory: true
prefetch_factor: 2
persistent_workers: true
rot_type: ${rot_type}           # 'quat' | 'r6d' | 'euler' | 'axis'
trans_anchor: ${hand_anchor}    # 'base' | 'palm_center' | 'mjcf'
hand_scale: 1.0
urdf_assets_meta_path: ${paths.assets_dir}/urdf/urdf_assets_meta.json
use_cached_keypoints: false
cache_root: null
cache_max_shards_in_memory: 2
use_local_pose_only: true
norm_xyz_stats_path: ${paths.data_dir}/DexGraspNet/norm_xyz_stats_use_local_anchor-${hand_anchor}

# Optional phases for splits
train_phase: all
val_phase: all
test_phase: all

# Graph construction options (follow the notebook defaults)
use_palm_star: false
connect_forearm: true
add_middle_distal: true

# Passed through to the underlying dataset (MyDexGraspNet)
dataset_kwargs:
  asset_dir: ${paths.data_dir}/DexGraspNet
  phase: all
  rot_type: ${rot_type}
  trans_anchor: ${hand_anchor}
  debug_mode: true
  use_stats_normalization: true
  normalization_stats_path: ${paths.assets_dir}/unified_normalization_stats
  # Explicit debug files (override defaults when debug_mode: true)
  pt_file_name: debug_grasp_data_128.pt
  split_file_name: debug_grasp_128.json
  # pt_file_name: debug_grasp_data_16.pt
  # split_file_name: debug_grasp_16.json
